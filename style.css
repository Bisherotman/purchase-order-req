<script>
  // عناصر الإيميل
  const emailInput  = document.getElementById('loginEmail');
  const emailWrap   = document.getElementById('emailWrap');
  const clearEmail  = document.getElementById('clearEmail');

  function refreshEmailUI(){
    emailWrap.classList.toggle('has-value', !!emailInput.value.trim());
  }
  emailInput.addEventListener('input', refreshEmailUI);
  clearEmail.addEventListener('click', () => { emailInput.value = ''; emailInput.focus(); refreshEmailUI(); });
  refreshEmailUI();

  // عناصر كلمة السر
  const pwdInput  = document.getElementById('loginPassword');
  const pwdWrap   = document.getElementById('pwdWrap');
  const togglePwd = document.getElementById('togglePwd');
  const clearPwd  = document.getElementById('clearPwd');

  function refreshPwdUI(){
    pwdWrap.classList.toggle('has-value', !!pwdInput.value);
  }
  pwdInput.addEventListener('input', refreshPwdUI);
  togglePwd.addEventListener('click', () => {
    pwdInput.type = (pwdInput.type === 'password') ? 'text' : 'password';
    pwdInput.focus();
  });
  clearPwd.addEventListener('click', () => { pwdInput.value = ''; pwdInput.focus(); refreshPwdUI(); });
  refreshPwdUI();

  // اجعل الشعار يرجع للصفحة الرئيسية (طلب جديد بعد تسجيل الدخول)
  document.getElementById('brandLink').addEventListener('click', (e)=>{
    e.preventDefault();
    if (window.currentUser) location.hash = '#/new';
    else location.hash = '#/login';
  });
</script>
